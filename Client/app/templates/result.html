<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <link rel="stylesheet" href="{{url_for('static', filename='index.css') }}">
  <title>Shoogle</title>
</head>
<body>

  <form action="https://www.google.com/search" method="GET">
    <div id="search-bar" class="mx-auto mt-5 search-bar input-group mb-3">
      <input name="q" type="text" class="form-control rounded-pill" placeholder="이미지 입력 또는 키워드 검색" aria-label="Recipient's username" aria-describedby="button-addon2">
      <div class="input-group-append">
      </div>
    </div>
  </form>

  <!-- Gallery -->
  <div id="gallery" style="margin:0 auto; width: auto;">
    <script type="text/javascript">
      var result = '';

      var apiUrl = 'http://192.168.0.5:5000/items';
      fetch(apiUrl).then(response => {
        return response.json();
      }).then(data => {
        // Work with JSON data here
        items = data['data'];

        for(var i = 0; i<items.length; ++i){
          result += '<a href="' + items[i].item_url + '"><img class="thumbnail" src="' + items[i].image_url + '" loading="lazy"/> </a>';
        }

        var gallery = document.getElementById("gallery");
        gallery.innerHTML = result;

      }).catch(err => {
        // Do something for an error here
      });
    </script>
  </div>
  <!-- Gallery -->

</body>
</html>

